---
title: "Understanding Factors That Affects the Existence of Digital Innovation Hubs"
subtitle: "An Analysis of Toronto Libraries' Data"
author: "Yanzun Jiang"
thanks: "Code and data are available at: [https://github.com/Stary54264/relationship_between_attributes_and_whether_dih_exists_in_toronto_libraries](https://github.com/Stary54264/relationship_between_attributes_and_whether_dih_exists_in_toronto_libraries)."
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(arrow)
library(rstanarm)
library(here)
library(tinytable)
```

\newpage

# Introduction

Despite the growing importance of innovation hubs in the global economy, the factors influencing the presence of Digital Innovation Hubs (DIH) in facilities remain underexplored and needed to be filled. This paper seeks to identify the key factors that influence whether a library in Toronto has a DIH, focusing on attributes such as area size, the number of public parking spots, the number of workstations in the library, and the number of years from the library was built.

To investigate these factors, a logistic regression model was utilized, which is ideal for predicting binary outcomes (the presence or absence of a DIH). This analysis aims to estimate the likelihood of a library having a DIH based on these attributes. The dataset used in this study contains information on various libraries in Toronto. After data cleaning, relevant variables was selected to do data analysis. The logistic regression model will reveal how each attribute (area size, parking availability, number of workstations, and age of the building) impacts the presence of a DIH.

Results

DIHs are vital in fostering entrepreneurship, driving economic development, and supporting technological advancements. Understanding the attributes that contribute to the likelihood of a library of having a DIH could provide valuable insights for urban planners and policymakers.

The remainder of this paper is structured as follows: @sec-data discusses the data used in this analysis, including an overview of the dataset and key descriptive statistics. @sec-model outlines the logistic regression model, its assumptions, and its interpretation. @sec-results presents the results of the model, including the significance of each attribute in predicting the presence of a DIH. @sec-discussion offers a discussion of the findings, examines how these attributes affect DIH presence, and lists some weakness of this analysis. Statistical analysis is performed using `R` [@r], with packages `tidyverse` [@tidyverse], `arrow` [@arrow], `janitor` [@janitor], `testthat` [@testthat], `rstanarm` [@rstanarm], `here` [@here], and `tinytable` [@tinytable].

## Estimand

The estimand in this paper is the presence of a Digital Innovation Hub (DIH) in a library. However, accurately observing which libraries have a DIH is not straightforward due to several challenges faced by urban planners. They may not have access to complete or up-to-date information about all libraries. This lack of comprehensive data, combined with regional variations and different reporting standards, makes it difficult to directly know the presence of a DIH across all libraries. To address this issue, a logistic regression model was built, since it allows us to estimate the probability of a facility having a DIH based on key attributes available in the dataset. By doing so, we aim to provide urban planners with insights into which factors most strongly influence the presence of DIHs, despite the challenges in directly measuring this estimand.

# Data {#sec-data}

```{r}
#| include: false
#| warning: false
#| message: false

data <- read_parquet(
  here::here("data/02-analysis_data/analysis_data.parquet"))
```

## Overview
 
This report uses a dataset collected by Toronto Public Library [@library] and posted on Open Data Toronto [@data]. [@tbl-data] is a preview of the dataset. These data provide valuable insights into the physical attributes and temporal characteristics of libraries that may house DIHs. Alternative datasets, such as those focusing on municipal buildings or educational institutions, were considered but ultimately not used because libraries are more accessible to public, thus having a bigger impact on the society. The dataset includes predictor variables including library area, public parking spots, the number of workstations, and the year the library was built. Data on these variables would be used to predict the outcome variable - the presence of DIHs.

## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Variables

One outcome variable and four predictor variables are used in the model:

`dih`: The presence of DIHs in libraries in Toronto. If there is one or more DIHs in the library, this field is set to 1; otherwise, this field is set to 0.

`area`: The total size of the library measured in square feet.

`parking`: The number of parking spaces available for the public. If a branch does not have any public parking spaces or shares parking spaces with another location, this field is set to 0.

`workstations`: A count of computers with internet access available for public use in the branch.

`year`: The number of years from the year that the present location of the library was officially opened to the general public. This variable was constructed using the formula $year=2024-year~built$. The age of the library was used instead of the year that the library was built since the age shows the degree of newness, which might affect the presence of DIHs. However, the year built is not that direct.

Theeir descriptive statistics and graphs of their distribution is included in appendix (@sec-graph).

# Model {#sec-model}

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results {#sec-results}

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

first_model <- readRDS(file = here::here("models/model.rds"))
```


# Discussion {#sec-discussion}

## First discussion point

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}

# Descriptive Statistics and Graphs of the Dataset {#sec-graph}

## Preview of the Dataset

```{r}
#| label: tbl-data
#| tbl-cap: "Preview of the Toronto Libraries Dataset"
#| message: false
#| echo: false

preview <- tt(head(data))
preview
```

## Descriptive Statistics

```{r}
#| label: tbl-area
#| tbl-cap: "Descriptive Statistics of `area`"
#| message: false
#| echo: false

area <- tt(data |> summarize(Mean = round(mean(area), 1),
                     Median = median(area),
                     Minimum = min(area),
                     Maximum = max(area),
                     IQR = round(IQR(area), 1)))
area
```

```{r}
#| label: tbl-parking
#| tbl-cap: "Descriptive Statistics of `parking`"
#| message: false
#| echo: false

parking <- tt(data |> summarize(Mean = round(mean(parking), 1),
                     Median = median(parking),
                     Minimum = min(parking),
                     Maximum = max(parking),
                     IQR = round(IQR(parking), 1)))
parking
```

```{r}
#| label: tbl-workstations
#| tbl-cap: "Descriptive Statistics of `workstations`"
#| message: false
#| echo: false

workstations <- tt(data |> summarize(Mean = round(mean(workstations), 1),
                     Median = median(workstations),
                     Minimum = min(workstations),
                     Maximum = max(workstations),
                     IQR = round(IQR(workstations), 1)))
workstations
```

```{r}
#| label: tbl-year
#| tbl-cap: "Descriptive Statistics of `year`"
#| message: false
#| echo: false

year <- tt(data |> summarize(Mean = round(mean(year), 1),
                     Median = median(year),
                     Minimum = min(year),
                     Maximum = max(year),
                     IQR = round(IQR(year), 1)))
year
```

## Graphs

```{r}
#| label: fig-dih
#| tbl-cap: "Presence of DIHs in Toronto Libraries"
#| message: false
#| echo: false

data |> ggplot(aes(x = dih)) +
  geom_bar(col = "lightblue", fill = "lightblue", alpha = 0.8) +
  labs(x = "Presence of DIHs", y = "# of Libraries") +
  theme_minimal()
```

```{r}
#| label: fig-area
#| tbl-cap: "Distribution of Total Areas of Libraries in Toronto"
#| message: false
#| echo: false

data |> ggplot(aes(x = area)) +
  geom_histogram(col = "lightblue", fill = "lightblue", alpha = 0.8) +
  labs(x = "Total Area", y = "# of Libraries") +
  theme_minimal()
```

```{r}
#| label: fig-parking
#| tbl-cap: "Distribution of Number of Parking Spaces at Libraries in Toronto"
#| message: false
#| echo: false

data |> ggplot(aes(x = parking)) +
  geom_histogram(col = "lightblue", fill = "lightblue", alpha = 0.8) +
  labs(x = "# of Parking Spaces", y = "# of Libraries") +
  theme_minimal()
```

```{r}
#| label: fig-workstations
#| tbl-cap: "Distribution of Number of Workstations in Libraries in Toronto"
#| message: false
#| echo: false

data |> ggplot(aes(x = workstations)) +
  geom_histogram(col = "lightblue", fill = "lightblue", alpha = 0.8) +
  labs(x = "# of Workstations", y = "# of Libraries") +
  theme_minimal()
```

```{r}
#| label: fig-year
#| tbl-cap: "Distribution of Age of Libraries in Toronto"
#| message: false
#| echo: false

data |> ggplot(aes(x = year)) +
  geom_histogram(col = "lightblue", fill = "lightblue", alpha = 0.8) +
  labs(x = "# of Workstations", y = "# of Libraries") +
  theme_minimal()
```

\newpage

# References
